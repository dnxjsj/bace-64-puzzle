<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Data Stream 3D Puzzle Interface - PC Optimized</title>
<style>
  :root {
    --bg: #050505;
    --text: #00ff41; /* Matrix Green */
    --panel: #111;
    --tile-size: 42px; /* PC 해상도에 맞춰 약간 조정 */
  }
  
  body {
    background: var(--bg); color: var(--text);
    font-family: 'Consolas', 'Courier New', monospace;
    margin: 0; padding: 20px;
    height: 100vh;
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    overflow: hidden; /* 스크롤 방지 */
  }

  .terminal-header {
    font-size: 18px;
    margin-bottom: 15px;
    font-weight: bold;
    text-shadow: 0 0 10px var(--text);
    border-bottom: 2px solid var(--text);
    padding-bottom: 5px;
  }

  /* 메인 레이아웃: 좌측 데이터, 우측 퍼즐 */
  .main-layout {
    display: flex;
    flex-direction: row;
    gap: 20px;
    flex: 1;
    min-height: 0; /* flex 자식의 overflow 작동을 위해 필요 */
  }

  /* 좌측 데이터 뷰어 */
  .data-viewer {
    flex: 1; /* 가로 공간 절반 차지 */
    display: flex;
    flex-direction: column;
    border: 1px solid var(--text);
    background: #000;
    box-shadow: 0 0 15px rgba(0, 255, 65, 0.1);
  }
  
  .viewer-header {
    background: var(--text); color: #000;
    padding: 6px 12px;
    font-weight: bold; font-size: 13px;
  }

  #raw-data-area {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    font-size: 12px;
    line-height: 1.6;
    word-break: break-all;
    color: #00cc33;
    white-space: pre-wrap;
  }

  /* 우측 퍼즐 영역 */
  .puzzle-section {
    flex: 1.2; /* 퍼즐 공간을 조금 더 넓게 */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #0a0a0a;
    border: 1px solid #333;
    padding: 10px;
  }

  #puzzle-grid {
    display: grid;
    grid-template-columns: repeat(12, var(--tile-size));
    grid-template-rows: repeat(9, var(--tile-size));
    gap: 3px;
    background: #222;
    padding: 10px;
    border: 2px solid #444;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
  }

  .tile {
    width: var(--tile-size); height: var(--tile-size);
    display: flex; align-items: center; justify-content: center;
    font-size: 10px; font-weight: bold; cursor: pointer; border-radius: 2px;
    transition: transform 0.1s, filter 0.1s;
    user-select: none;
  }
  .tile:hover { filter: brightness(1.3); transform: scale(1.02); outline: 1px solid #fff; }
  .tile.empty { background: #1a1a1a !important; border: 1px dashed #444; cursor: default; }
  .tile.empty:hover { transform: none; outline: none; }

  .status-bar {
    margin-top: 15px;
    font-size: 14px;
    color: #888;
    background: #000;
    padding: 5px 20px;
    border-radius: 20px;
    border: 1px solid #333;
  }

  /* 스크롤바 커스텀 */
  #raw-data-area::-webkit-scrollbar { width: 8px; }
  #raw-data-area::-webkit-scrollbar-track { background: #000; }
  #raw-data-area::-webkit-scrollbar-thumb { background: var(--text); border-radius: 4px; }
</style>
</head>
<body>

<div class="terminal-header">[ DECRYPTION TERMINAL v2.0 - SECURE ACCESS ]</div>

<div class="main-layout">
  <div class="data-viewer">
    <div class="viewer-header">ENCRYPTED NODE DATA SOURCE (Base64)</div>
    <div id="raw-data-area">
<b>INSTRUCTIONS:</b>
1. Decipher the Base64 streams below.
2. Arrange the slide puzzle into the correct cube net configuration.
3. Match colors to the decoded patterns.

---
<b>[ORENGE SOURCE]</b>
orenge senter NTEgNDkgMzIgNTEgNDggMzIgNTEgNTQgMzIgNTAgNDggMzIgNTEgNDkgMzIgNTEgNDggMzIgNTEgNTQgMzIgNTAgNDggMzIgNTEgNDggMzIgNTEgNTQgMzIgNTEgNTQgMzIgNTAgNDggMzIgNTEgNDkgMzIgNTEgNDggMzIgNTEgNTMgMzIgNTAgNDggMzIgNTEgNDggMzIgNTEgNTQgMzIgNTEgNDggMzIgNTAgNDggMzIgNTEgNDggMzIgNTEgNTQgMzIgNTEgNDggMzIgNTAgNDggMzIgNTEgNDkgMzIgNTEgNDggMzIgNTEgNTQgMzIgNTAgNDggMzIgNTEgNDkgMzIgNTEgNDggMzIgNTEgNTQgMzIgNTAgNDggMzIgNTEgNDggMzIgNTEgNTIgMzIgNTEgNDggMzIgNTAgNDggMzIgNTEgNDkgMzIgNTEgNDggMzIgNTEgNTQgMzIgNTAgNDggMzIgNTEgNDkgMzIgNTEgNDggMzIgNTEgNTQgMzIgNTAgNDggMzIgNTEgNDggMzIgNTEgNTQgMzIgNTEgNTQgMzIgNTAgNDggMzIgNTEgNDkgMzIgNTEgNDggMzIgNTEgNTMgMzIgNTAgNDggMzIgNTEgNDggMzIgNTEgNTQgMzIgNTEgNDggMzIgNTAgNDggMzIgNTEgNDggMzIgNTEgNTQgMzIgNTEgNDggMzIgNTAgNDggMzIgNTEgNDkgMzIgNTEgNDggMzIgNTEgNTQgMzIgNTAgNDggMzIgNTEgNDkgMzIgNTEgNDggMzIgNTEgNTQgMzIgNTAgNDggMzIgNTEgNDggMzIgNTEgNTIgMzIgNTEgNDggMzIgNTAgNDggMzIgNTEgNDkgMzIgNTEgNDggMzIgNTEgNTQgMzIgN0A== ... (이하 데이터 생략 가능)
    </div>
  </div>

  <div class="puzzle-section">
    <div id="puzzle-grid"></div>
    <div class="status-bar" id="puzzle-status">SYSTEM READY. WAITING FOR INPUT...</div>
  </div>
</div>

<script>
// 기존 로직 그대로 유지
const cubeColors = [
  { c: '#e67e22', l: 'ORN' }, 
  { c: '#3498db', l: 'BLU' }, 
  { c: '#e74c3c', l: 'RED' }, 
  { c: '#2ecc71', l: 'GRN' }, 
  { c: '#ffffff', l: 'WHT' }, 
  { c: '#f1c40f', l: 'YEL' }
];

const validPos = [];
for(let r=0; r<9; r++){
  for(let c=0; c<12; c++){
    if((r<3 && c>=3 && c<6) || (r>=3 && r<6) || (r>=6 && c>=3 && c<6)) validPos.push(r*12 + c);
  }
}

let tiles = [];
cubeColors.forEach(colorObj => {
  for(let i=0; i<9; i++) tiles.push({...colorObj});
});
tiles.sort(() => Math.random() - 0.5);

let board = Array(108).fill(null);
let emptyIdx = validPos[53];

validPos.forEach((p, i) => {
  if(i < 53) board[p] = tiles[i];
  else board[p] = 'empty';
});

function render() {
  const grid = document.getElementById('puzzle-grid');
  grid.innerHTML = '';
  for(let i=0; i<108; i++) {
    const div = document.createElement('div');
    if(!validPos.includes(i)) {
      div.style.visibility = 'hidden';
    } else {
      const t = board[i];
      if(t === 'empty') {
        div.className = 'tile empty';
      } else {
        div.className = 'tile';
        div.style.background = t.c;
        div.style.color = (t.c === '#ffffff' || t.c === '#f1c40f') ? '#000' : '#fff';
        div.innerText = t.l;
        div.onclick = () => move(i);
      }
    }
    grid.appendChild(div);
  }
}

function move(idx) {
  const r = Math.floor(idx/12), c = idx%12;
  const er = Math.floor(emptyIdx/12), ec = emptyIdx%12;
  if(Math.abs(r-er) + Math.abs(c-ec) === 1) {
    board[emptyIdx] = board[idx];
    board[idx] = 'empty';
    emptyIdx = idx;
    document.getElementById('puzzle-status').innerText = `TILE MOVED TO ADDR: 0x${idx.toString(16).toUpperCase()}`;
    render();
  }
}

render();
</script>
</body>
</html>
